<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>async_await</title>
    <style>
        table{
            width: 300px;
            margin-bottom: 10px;
            display: flex;
            border: 1px solid;
        }
        th{
            width: 80px;
            border : 1px solid;
            text-align: center;
        }
        td{
            width: 220px;
            border: 1px solid;
        }
    </style>
</head>

<body>
    <div id="result"></div>

    <script>
        // fetch : 불러오다 then : 그 다음에
        // fetch("https://jsonplaceholder.typicode.com/users")
        // .then(Response => Response.json())
        // .then(users => console.log(users));
        // 콘솔에서 확인하기

        // init : 함수 호출, 선언
        // async : 비동기 방식
        // await : 기다리다
        async function init() {
            const response = await fetch(
                "https://jsonplaceholder.typicode.com/users"
            );
            const users = await response.json();
            console.log(users);
            display(users); //필요 정보만 표시
        }

        function display(users) {
            const result = document.querySelector("#result");
            let string = "";
            users.forEach((user) => {
                string += `<table>
                    <tr>
                        <th>이름</th> <td>${user.name}</td>
                    </tr>
                    <tr>
                        <th>아이디</th> <td>${user.username}</td>
                    </tr>
                    <tr>
                        <th>주소</th> <td>${user.address.city}</td>
                    </tr>
                    <tr>
                        <th>이메일</th> <td>${user.email}</td> 
                    </tr>
                     <tr>
                        <th>전화번호</th> <td>${user.phone}</td>
                     </tr>
                    <tr>
                        <th>회사</th> <td>${user.company.name}</td>
                    </tr>
                        </table>`;
            });
            result.innerHTML = string;
        }

        init(); // 함수실행부분(호출)
    </script>
</body>

</html>